@prefix : <http://example.org/ns#> .
@prefix query: <https://github.com/phochste/query#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .

(  ?Query ?Body 
   ?Param ?WhereBody ?ResultBody
   ?Surface
) log:onNegativeSurface {
    () log:onNeutralSurface {
        ?Query a query:Query ;
            query:select ?Body .
    } .

    ?Body log:includes {
        ?Param query:where ?WhereBody ;
                query:result ?ResultBody .
    } .

    ( ?WhereBody {
        () log:onNegativeSurface {
            ?Query query:answer ?ResultBody .
        } 
    }) log:conjunction ?Surface.

    () log:onNegativeSurface {
        ?Param log:onNegativeSurface ?Surface.
    } .
} .

(?X ?Answer) log:onQuerySurface {
    ?X query:answer ?Answer .
} .
