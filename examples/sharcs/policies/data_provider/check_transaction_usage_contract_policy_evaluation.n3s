@prefix : <http://www.example.org/rdf#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .

# ForAll Session, Client, Membership , TransactionUsageContract:
# (<Session> a ProviderSession) &
# (<Session> client <Client>) &
# (<Session> membership <Membership>) &
# (<TransactionUsageContract> a TransactionUsageContract) &
# (<TransactionUsageContract> isActive true) & 
# (<TransactionUsageContract> hasMembership <Membership>) &
# (<TransactionUsageContract> hasClient <Client>)
# IMPLIES
#    (<Session> a ValidTransactionUsageContract) &
#    (<Session> contract <TransactionUsageContract>)
(_:Session _:Client _:Membership _:TransactionUsageContract) log:onNegativeSurface {
    _:Session
         a :ProviderSession ;
         :client _:Client ;
         :membership _:Membership .

    _:TransactionUsageContract 
        a :TransactionUsageContract ;
        :isActive true ;
        :hasMembership _:Membership ;
        :hasClient _:Client .
        
    () log:onNegativeSurface {
        _:Session 
            a :ValidTransactionUsageContract ;
            :contract _:TransactionUsageContract .
    } .
} .

# ForAll Session, Contract, User, Membership, Permission, Allows
# (<Session> a ProviderSession) &
# (<Session> user <User>) &
# (<Session> membership <Membership>) &
# (<Session> contract <Contract>) &
# (<Permission> a Permission) &
# (<Permission> isActive true) &
# (<Permission> hasMembership <Membership>) &
# (<Permission> allows <Allows>) &
# (<Allows> contract <Contract>) &
# (<Allows> subscriber <User>)
# IMPLIES
#   (<Session> a ValidPermission)
(_:Session _:Contract _:User _:Membership _:Permission _:Allows) log:onNegativeSurface {
    _:Session 
        a :ProviderSession ;
        :user _:User ;
        :membership _:Membership ;
        :contract _:Contract . 

    _:Permission 
        a :Permission ;
        :isActive true ;
        :hasMembership _:Membership .

    _:Permission :allows _:Allows .

    _:Allows 
        :contract _:Contract ;
        :subscriber _:User .

    () log:onNegativeSurface {
        _:Session
            a :ValidPermission .
    } .
} .