@prefix : <http://www.example.org/rdf#> .
@prefix log: <http://www.w3.org/2000/10/swap/log#> .

# WHEN:
# (<Login> user <User>) &&
# (<Login> membership <Membership>) &&
# (<Permission> a Permission) &&
# (<Permission> isActive true) &&
# (<Permission> hasMembership <Membership>) &&
# (<Permission> allows <Allows>) &&
# (<Allows> subscription <Subcription>) &&
# (<Allows> usedBy <User>)
# THEN:
#   (<Login> permission <Permission>) &&
#   (<Login> isValidPermission true)
(_:User _:Membership _:Subscription _:Permission _:Allows) log:onNegativeSurface {
    :Login :user _:User .
    :Login :membership _:Membership .
    :Login :subscription _:Subscription .

    _:Permission
        a :Permission;
        :isActive true;
        :hasMembership _:Membership .

    _:Permission
        :allows _:Allows.

    _:Allows 
        :subscription _:Subscription ;
        :usedBy _:User .

    () log:onNegativeSurface {
        :Login :permission _:Permission.
        :Login :isValidPermission true .
    } .
} .
